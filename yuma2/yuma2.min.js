var i=void 0,j=!0,m=null,n=!1,p,q=this;
function r(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function aa(a){var b=r(a);return"array"==b||"object"==b&&"number"==typeof a.length}function s(a){return"string"==typeof a}function ba(a){var b=typeof a;return"object"==b&&a!=m||"function"==b}function u(a){return a[ca]||(a[ca]=++da)}var ca="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),da=0;
function ea(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}function fa(a,b){function c(){}c.prototype=b.prototype;a.s=b.prototype;a.prototype=new c};function ga(a){if(!ha.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ia,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ja,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ka,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(la,"&quot;"));return a}var ia=/&/g,ja=/</g,ka=/>/g,la=/\"/g,ha=/[&<>\"]/,ma={};function na(a){return ma[a]||(ma[a]=(""+a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()}))};var v=Array.prototype,oa=v.indexOf?function(a,b,c){return v.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:0>c?Math.max(0,a.length+c):c;if(s(a))return!s(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},pa=v.forEach?function(a,b,c){v.forEach.call(a,b,c)}:function(a,b,c){for(var e=a.length,g=s(a)?a.split(""):a,d=0;d<e;d++)d in g&&b.call(c,g[d],d,a)};function qa(a){return v.concat.apply(v,arguments)}
function ra(a){if("array"==r(a))return qa(a);for(var b=[],c=0,e=a.length;c<e;c++)b[c]=a[c];return b}function sa(a,b,c){return 2>=arguments.length?v.slice.call(a,b):v.slice.call(a,b,c)};var x,y,z,A,ta;function ua(){return q.navigator?q.navigator.userAgent:m}function B(){return q.navigator}A=z=y=x=n;var C;if(C=ua()){var va=B();x=0==C.indexOf("Opera");y=!x&&-1!=C.indexOf("MSIE");z=!x&&-1!=C.indexOf("WebKit");A=!x&&!z&&"Gecko"==va.product}var wa=x,D=y,E=A,F=z,xa=B();ta=-1!=(xa&&xa.platform||"").indexOf("Mac");var ya=!!B()&&-1!=(B().appVersion||"").indexOf("X11"),G;
a:{var H="",I;if(wa&&q.opera)var J=q.opera.version,H="function"==typeof J?J():J;else if(E?I=/rv\:([^\);]+)(\)|;)/:D?I=/MSIE\s+([^\);]+)(\)|;)/:F&&(I=/WebKit\/(\S+)/),I)var za=I.exec(ua()),H=za?za[1]:"";if(D){var K,Aa=q.document;K=Aa?Aa.documentMode:i;if(K>parseFloat(H)){G=""+K;break a}}G=H}var Ba={};
function L(a){var b;if(!(b=Ba[a])){b=0;for(var c=(""+G).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),g=Math.max(c.length,e.length),d=0;0==b&&d<g;d++){var f=c[d]||"",h=e[d]||"",l=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var t=l.exec(f)||["","",""],k=o.exec(h)||["","",""];if(0==t[0].length&&0==k[0].length)break;b=((0==t[1].length?0:parseInt(t[1],10))<(0==k[1].length?0:parseInt(k[1],10))?-1:(0==t[1].length?0:parseInt(t[1],
10))>(0==k[1].length?0:parseInt(k[1],10))?1:0)||((0==t[2].length)<(0==k[2].length)?-1:(0==t[2].length)>(0==k[2].length)?1:0)||(t[2]<k[2]?-1:t[2]>k[2]?1:0)}while(0==b)}b=Ba[a]=0<=b}return b}var Ca={};function M(){return Ca[9]||(Ca[9]=D&&!!document.documentMode&&9<=document.documentMode)};var Da=!D||M();!E&&!D||D&&M()||E&&L("1.9.1");D&&L("9");function Ea(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var e=sa(arguments,1),g;g=c;for(var d=0,f=0;f<e.length;f++)0<=oa(g,e[f])||(g.push(e[f]),d++);g=d==e.length;a.className=c.join(" ");return g};function N(a,b){this.x=a!==i?a:0;this.y=b!==i?b:0};function O(a,b){this.width=a;this.height=b}O.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};O.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Fa(a,b){for(var c in a)b.call(i,a[c],c,a)}var Ga="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Ha(a,b){for(var c,e,g=1;g<arguments.length;g++){e=arguments[g];for(c in e)a[c]=e[c];for(var d=0;d<Ga.length;d++)c=Ga[d],Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}};function Ia(a,b){Fa(b,function(b,e){"style"==e?a.style.cssText=b:"class"==e?a.className=b:"for"==e?a.htmlFor=b:e in Ja?a.setAttribute(Ja[e],b):0==e.lastIndexOf("aria-",0)?a.setAttribute(e,b):a[e]=b})}var Ja={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function P(a,b,c){var e=arguments,g=document,d=e[0],f=e[1];if(!Da&&f&&(f.name||f.type)){d=["<",d];f.name&&d.push(' name="',ga(f.name),'"');if(f.type){d.push(' type="',ga(f.type),'"');var h={};Ha(h,f);f=h;delete f.type}d.push(">");d=d.join("")}d=g.createElement(d);f&&(s(f)?d.className=f:"array"==r(f)?Ea.apply(m,[d].concat(f)):Ia(d,f));2<e.length&&Ka(g,d,e);return d}
function Ka(a,b,c){function e(c){c&&b.appendChild(s(c)?a.createTextNode(c):c)}for(var g=2;g<c.length;g++){var d=c[g];if(aa(d)&&!(ba(d)&&0<d.nodeType)){var f;a:{if(d&&"number"==typeof d.length){if(ba(d)){f="function"==typeof d.item||"string"==typeof d.item;break a}if("function"==r(d)){f="function"==typeof d.item;break a}}f=n}pa(f?ra(d):d,e)}else e(d)}};function Q(a,b,c){s(b)?La(a,c,b):Fa(b,ea(La,a))}function La(a,b,c){a.style[na(c)]=b}function Ma(a,b){var c,e,g=E&&(ta||ya)&&L("1.9");b instanceof N?(c=b.x,e=b.y):(c=b,e=i);a.style.left=R(c,g);a.style.top=R(e,g)}function Na(a,b){var c;if(b instanceof O)c=b.height,b=b.width;else throw Error("missing height argument");a.style.width=R(b,j);a.style.height=R(c,j)}function R(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function Oa(a){var b;a:{b=9==a.nodeType?a:a.ownerDocument||a.document;if(b.defaultView&&b.defaultView.getComputedStyle&&(b=b.defaultView.getComputedStyle(a,m))){b=b.display||b.getPropertyValue("display");break a}b=""}if("none"!=(b||(a.currentStyle?a.currentStyle.display:m)||a.style&&a.style.display))return Pa(a);b=a.style;var c=b.display,e=b.visibility,g=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Pa(a);b.display=c;b.position=g;b.visibility=e;return a}
function Pa(a){var b=a.offsetWidth,c=a.offsetHeight,e=F&&!b&&!c;return(b===i||e)&&a.getBoundingClientRect?(b=a.getBoundingClientRect(),D&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop),new O(b.right-b.left,b.bottom-b.top)):new O(b,c)}function Qa(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")};!D||M();var Ra=!D||M();D&&L("8");!F||L("528");E&&L("1.9b")||D&&L("8")||wa&&L("9.5")||F&&L("528");!E||L("8");function S(){}S.prototype.l=n;S.prototype.e=function(){this.l||(this.l=j,this.f())};S.prototype.f=function(){this.q&&Sa.apply(m,this.q)};function Sa(a){for(var b=0,c=arguments.length;b<c;++b){var e=arguments[b];aa(e)?Sa.apply(m,e):e&&"function"==typeof e.e&&e.e()}};function U(a,b){this.type=a;this.currentTarget=this.target=b}fa(U,S);U.prototype.f=function(){delete this.type;delete this.target;delete this.currentTarget};U.prototype.j=n;U.prototype.r=j;function Ta(a){Ta[" "](a);return a}Ta[" "]=function(){};function V(a,b){a&&this.g(a,b)}fa(V,U);p=V.prototype;p.target=m;p.relatedTarget=m;p.offsetX=0;p.offsetY=0;p.clientX=0;p.clientY=0;p.screenX=0;p.screenY=0;p.button=0;p.keyCode=0;p.charCode=0;p.ctrlKey=n;p.altKey=n;p.shiftKey=n;p.metaKey=n;
p.g=function(a,b){var c=this.type=a.type;U.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var e=a.relatedTarget;if(e){if(E){var g;a:{try{Ta(e.nodeName);g=j;break a}catch(d){}g=n}g||(e=m)}}else"mouseover"==c?e=a.fromElement:"mouseout"==c&&(e=a.toElement);this.relatedTarget=e;this.offsetX=F||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=F||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=a.screenX||
0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;delete this.r;delete this.j};p.f=function(){V.s.f.call(this);this.relatedTarget=this.currentTarget=this.target=m};function Ua(){}var Va=0;p=Ua.prototype;p.key=0;p.c=n;p.k=n;p.g=function(a,b,c,e,g,d){if("function"==r(a))this.m=j;else if(a&&a.handleEvent&&"function"==r(a.handleEvent))this.m=n;else throw Error("Invalid listener argument");this.d=a;this.o=b;this.src=c;this.type=e;this.capture=!!g;this.i=d;this.k=n;this.key=++Va;this.c=n};p.handleEvent=function(a){return this.m?this.d.call(this.i||this.src,a):this.d.handleEvent.call(this.d,a)};var W={},X={},Y={},Z={};
function $(a,b,c,e,g){if(b)if("array"==r(b))for(var d=0;d<b.length;d++)$(a,b[d],c,e,g);else{var e=!!e,f=X;b in f||(f[b]={a:0,b:0});f=f[b];e in f||(f[e]={a:0,b:0},f.a++);var f=f[e],h=u(a),l;f.b++;if(f[h]){l=f[h];for(d=0;d<l.length;d++)if(f=l[d],f.d==c&&f.i==g){if(f.c)break;return}}else l=f[h]=[],f.a++;d=Wa();d.src=a;f=new Ua;f.g(c,d,a,b,e,g);c=f.key;d.key=c;l.push(f);W[c]=f;Y[h]||(Y[h]=[]);Y[h].push(f);a.addEventListener?(a==q||!a.p)&&a.addEventListener(b,d,e):a.attachEvent(b in Z?Z[b]:Z[b]="on"+b,
d)}else throw Error("Invalid event type");}function Wa(){var a=Xa,b=Ra?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function Ya(a,b,c,e,g){if("array"==r(b))for(var d=0;d<b.length;d++)Ya(a,b[d],c,e,g);else{e=!!e;a:{d=X;if(b in d&&(d=d[b],e in d&&(d=d[e],a=u(a),d[a]))){a=d[a];break a}a=m}if(a)for(d=0;d<a.length;d++)if(a[d].d==c&&a[d].capture==e&&a[d].i==g){Za(a[d].key);break}}}
function Za(a){if(W[a]){var b=W[a];if(!b.c){var c=b.src,e=b.type,g=b.o,d=b.capture;c.removeEventListener?(c==q||!c.p)&&c.removeEventListener(e,g,d):c.detachEvent&&c.detachEvent(e in Z?Z[e]:Z[e]="on"+e,g);c=u(c);g=X[e][d][c];if(Y[c]){var f=Y[c],h=oa(f,b);0<=h&&v.splice.call(f,h,1);0==f.length&&delete Y[c]}b.c=j;g.n=j;$a(e,d,c,g);delete W[a]}}}
function $a(a,b,c,e){if(!e.h&&e.n){for(var g=0,d=0;g<e.length;g++)e[g].c?e[g].o.src=m:(g!=d&&(e[d]=e[g]),d++);e.length=d;e.n=n;0==d&&(delete X[a][b][c],X[a][b].a--,0==X[a][b].a&&(delete X[a][b],X[a].a--),0==X[a].a&&delete X[a])}}function ab(a,b,c,e,g){var d=1,b=u(b);if(a[b]){a.b--;a=a[b];a.h?a.h++:a.h=1;try{for(var f=a.length,h=0;h<f;h++){var l=a[h];l&&!l.c&&(d&=bb(l,g)!==n)}}finally{a.h--,$a(c,e,b,a)}}return Boolean(d)}function bb(a,b){var c=a.handleEvent(b);a.k&&Za(a.key);return c}
function Xa(a,b){if(!W[a])return j;var c=W[a],e=c.type,g=X;if(!(e in g))return j;var g=g[e],d,f;if(!Ra){var h;if(!(h=b))a:{h=["window","event"];for(var l=q;d=h.shift();)if(l[d]!=m)l=l[d];else{h=m;break a}h=l}d=h;h=j in g;l=n in g;if(h){if(0>d.keyCode||d.returnValue!=i)return j;a:{var o=n;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(t){o=j}if(o||d.returnValue==i)d.returnValue=j}}o=new V;o.g(d,this);d=j;try{if(h){for(var k=[],T=o.currentTarget;T;T=T.parentNode)k.push(T);f=g[j];f.b=f.a;for(var w=k.length-
1;!o.j&&0<=w&&f.b;w--)o.currentTarget=k[w],d&=ab(f,k[w],e,j,o);if(l){f=g[n];f.b=f.a;for(w=0;!o.j&&w<k.length&&f.b;w++)o.currentTarget=k[w],d&=ab(f,k[w],e,n,o)}}else d=bb(c,o)}finally{k&&(k.length=0),o.e()}return d}e=new V(b,this);try{d=bb(c,e)}finally{e.e()}return d};function cb(a){function b(b){var f=b.offsetX-c,b=b.offsetY-e;g.clearRect(0,0,a.width,a.height);g.strokeRect(c+0.5,e+0.5,f,b)}var c,e,g=a.getContext("2d");g.lineWidth=1;g.strokeStyle="#ffffff";$(a,"mousedown",function(d){c=d.offsetX;e=d.offsetY;$(a,"mousemove",b)});$(a,"mouseup",function(){Ya(a,"mousemove",b)})};window.ImageAnnotator=function(a){var a=s(a)?document.getElementById(a):a,b=P("div","yuma-annotationlayer");Q(b,"position","absolute");Ma(b,new N(a.offsetLeft,a.offsetTop));var c=P("div","yuma-hint","Click and Drag to Annotate");Q(c,"position","absolute");Q(c,"pointer-events","none");Ma(c,new N(10,10));c.style.display="none";b.appendChild(c);var e=P("canvas","yuma-canvas");Ma(e,new N(0,0));Na(e,Oa(a));Ia(e,{width:a.width,height:a.height});b.appendChild(e);$(b,"mouseover",function(){Qa(e,1);c.style.display=
""});$(b,"mouseout",function(){Qa(e,0.4);c.style.display="none"});document.body.appendChild(b);new cb(e)};
